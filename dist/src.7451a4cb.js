parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"5vP1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.needsWork=exports.donut=exports.filip=void 0;var e=function(){},o=new Image;exports.filip=o,o.onload=e,o.src="https://emoji.slack-edge.com/T02FQ6PQD/filip/4c26a9bd69d545cf.png";var t=new Image;exports.donut=t,t.onload=e,t.src="https://emoji.slack-edge.com/T02FQ6PQD/donut-raptor-donut/ea5974ac7a5dc2dc.png";var d=new Image;exports.needsWork=d,d.onload=e,d.src="https://emoji.slack-edge.com/T02FQ6PQD/needs_work/d3837a09b0adebb2.png";
},{}],"4eSF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateRules=exports.rules=void 0;var t=require("./map");function r(t,r){return i(t)||n(t,r)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(t,r){var e=[],n=!0,i=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(f){i=!0,u=f}finally{try{n||null==a.return||a.return()}finally{if(i)throw u}}return e}function i(t){if(Array.isArray(t))return t}var u=function(t,r){o[t.name]||(o[t.name]=[]),o[t.name].push(r.name)},o={};exports.rules=o;var a=function(r,e){r.isObject()&&e.isFunction()&&u(r,e),r.isObject()&&e.isObject()&&t.map.entities.forEach(function(t){t.isText||t.name!==r.name||t.become(e)})},f=function(){exports.rules=o={};var e=t.map.entities.filter(function(t){return t.isText}),n=e.filter(function(t){return"IS"===t.name}),i=!0,u=!1,f=void 0;try{for(var l,c=function(){var t=l.value,n=r(e.filter(function(r){return r.x===t.x-1&&r.y===t.y}),1)[0],i=r(e.filter(function(r){return r.x===t.x+1&&r.y===t.y}),1)[0],u=r(e.filter(function(r){return r.x===t.x&&r.y===t.y-1}),1)[0],o=r(e.filter(function(r){return r.x===t.x&&r.y===t.y+1}),1)[0];n&&i&&a(n,i),u&&o&&a(u,o)},s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)c()}catch(y){u=!0,f=y}finally{try{i||null==s.return||s.return()}finally{if(u)throw f}}};exports.updateRules=f;
},{"./map":"pkQ8"}],"AG+G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleMove=exports.isKeyPressed=void 0;var e=require("./map"),r=require("./rules");function n(e,r){return o(e)||i(e,r)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,r){var n=[],t=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);t=!0);}catch(l){i=!0,o=l}finally{try{t||null==a.return||a.return()}finally{if(i)throw o}}return n}function o(e){if(Array.isArray(e))return e}var u={},a=37,l=38,s=39,y=40;window.onkeydown=function(e){u[e.keyCode]=!0},window.onkeyup=function(e){u[e.keyCode]=!1};var f=function(e){return u[e]};exports.isKeyPressed=f;var c=function t(i,o,u){if(i.x+o<0||i.x+o>=e.map.width||i.y+u<0||i.y+u>=e.map.height)return!1;var a=n(e.map.entities.filter(function(e){return e.x===i.x+o&&e.y===i.y+u}),1)[0];return!a||(r.rules[a.name]&&r.rules[a.name].includes("WIN")&&console.log("WIN"),!(!a.isText&&r.rules[a.name]&&r.rules[a.name].includes("STOP"))&&(!(a.isText||r.rules[a.name]&&r.rules[a.name].includes("PUSH"))||t(a,o,u)))},d=function n(t,i,o){var u=e.map.entities.filter(function(e){return e.x===t.x+i&&e.y===t.y+o}),a=!0,l=!1,s=void 0;try{for(var y,f=u[Symbol.iterator]();!(a=(y=f.next()).done);a=!0){var c=y.value;c&&(c.isText||r.rules[c.name]&&r.rules[c.name].includes("PUSH"))&&n(c,i,o)}}catch(d){l=!0,s=d}finally{try{a||null==f.return||f.return()}finally{if(l)throw s}}t.x+=i,t.y+=o},v=function(e){var r=new Date;if(r-e.lastMove>100){var n=0,t=0;u[a]&&(n=-1),u[s]&&(n=1),u[y]&&0===n&&(t=1),u[l]&&0===n&&(t=-1),(n||t)&&c(e,n,t)&&(d(e,n,t),e.lastMove=r)}};exports.handleMove=v;
},{"./map":"pkQ8","./rules":"4eSF"}],"P/8B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Entity=void 0;var e=require("./canvas"),t=require("./map"),i=require("./rules"),s=require("./controls");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function l(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}var r=["YOU","WIN","STOP"],o=["FIFI","SUGA","WORK"],c=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,i=e.color,s=e.sprite,l=e.x,r=e.y,o=e.isText,c=void 0!==o&&o;if(a(this,n),this.color=i,this.sprite=s,this.name=t,this.isText=c,this.x=l,this.y=r,this.lastMove=new Date,!i&&!s)throw new Error("I cant draw this!")}return l(n,[{key:"isObject",value:function(){return o.includes(this.name)}},{key:"isFunction",value:function(){return r.includes(this.name)}},{key:"become",value:function(e){this.color=e.color,this.name=e.name,this.sprite=e.sprite}},{key:"update",value:function(){this.isText||i.rules[this.name]&&i.rules[this.name].includes("YOU")&&(0,s.handleMove)(this)}},{key:"draw",value:function(){e.ctx.fillStyle=this.color,e.ctx.font="".concat(t.map.tileSize/2,"px Monospace"),e.ctx.textBaseline="middle",e.ctx.textAlign="center",this.isText?4===this.name.length?(e.ctx.fillText(this.name.substr(0,2),this.x*t.map.tileSize+t.map.tileSize/2,this.y*t.map.tileSize+t.map.tileSize/4),e.ctx.fillText(this.name.substr(2),this.x*t.map.tileSize+t.map.tileSize/2,this.y*t.map.tileSize+3*t.map.tileSize/4)):e.ctx.fillText(this.name,this.x*t.map.tileSize+t.map.tileSize/2,this.y*t.map.tileSize+t.map.tileSize/2):this.sprite?e.ctx.drawImage(this.sprite,this.x*t.map.tileSize,this.y*t.map.tileSize,t.map.tileSize,t.map.tileSize):e.ctx.fillRect(this.x*t.map.tileSize,this.y*t.map.tileSize,t.map.tileSize,t.map.tileSize)}}]),n}();exports.Entity=c;
},{"./canvas":"YUuN","./map":"pkQ8","./rules":"4eSF","./controls":"AG+G"}],"pkQ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.map=exports.bgColors=void 0;var e=require("./canvas"),t=require("./sprites"),n=require("./Entity"),i=["#222222","#272727"];exports.bgColors=i;var r={background:[[1,0,0,0,0,1],[0,0,0,1,0,0],[1,0,0,0,0,0],[0,0,0,0,0,0],[0,1,0,0,1,1],[1,0,0,0,0,0]],entities:[new n.Entity({x:0,y:3,name:"WORK",sprite:t.needsWork}),new n.Entity({x:1,y:3,name:"WORK",sprite:t.needsWork}),new n.Entity({x:3,y:3,name:"WORK",sprite:t.needsWork}),new n.Entity({x:4,y:3,name:"WORK",sprite:t.needsWork}),new n.Entity({x:1,y:1,name:"FIFI",sprite:t.filip,color:"#3c3c02",isText:!0}),new n.Entity({x:2,y:1,name:"IS",color:"#fefefe",isText:!0}),new n.Entity({x:3,y:1,name:"YOU",color:"#cc00cc",isText:!0}),new n.Entity({x:1,y:5,name:"SUGA",sprite:t.donut,color:"#3c3c02",isText:!0}),new n.Entity({x:2,y:5,name:"IS",color:"#fefefe",isText:!0}),new n.Entity({x:3,y:5,name:"WIN",color:"#cc00cc",isText:!0}),new n.Entity({x:2,y:2,name:"WORK",sprite:t.needsWork,color:"#3c3c02",isText:!0}),new n.Entity({x:2,y:3,name:"IS",color:"#fefefe",isText:!0}),new n.Entity({x:2,y:4,name:"STOP",color:"#cc00cc",isText:!0}),new n.Entity({x:0,y:0,name:"FIFI",sprite:t.filip})],get tileSize(){return Math.min(e.canvas.width/this.width,e.canvas.height/this.height)},get width(){return this.background[0].length},get height(){return this.background.length}};exports.map=r;
},{"./canvas":"YUuN","./sprites":"5vP1","./Entity":"P/8B"}],"YUuN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resize=exports.clear=exports.draw=exports.ctx=exports.canvas=void 0;var e=require("./map"),t=document.getElementById("game");exports.canvas=t;var r=t.getContext("2d");exports.ctx=r;var i=function(){for(var t=0;t<e.map.height;t++)for(var i=0;i<e.map.width;i++)r.fillStyle=e.bgColors[e.map.background[t][i]],r.fillRect(i*e.map.tileSize,t*e.map.tileSize,e.map.tileSize,e.map.tileSize);e.map.entities.forEach(function(e){return e.draw()})};exports.draw=i;var a=function(){r.fillStyle="#000",r.fillRect(0,0,t.clientWidth,t.clientHeight)};exports.clear=a;var o=function(){t.width=window.innerWidth,t.height=window.innerHeight};exports.resize=o;
},{"./map":"pkQ8"}],"H99C":[function(require,module,exports) {
"use strict";var e=require("./canvas"),r=require("./rules"),i=require("./map"),n=function(){(0,r.updateRules)(),i.map.entities.forEach(function(e){return e.update()})},t=function(){(0,e.clear)(),n(),(0,e.draw)()};(0,e.resize)(),setInterval(t,1e3/30),window.onresize=e.resize;
},{"./canvas":"YUuN","./rules":"4eSF","./map":"pkQ8"}]},{},["H99C"], null)
//# sourceMappingURL=src.7451a4cb.js.map